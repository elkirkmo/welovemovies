{% extends "base.html" %}


{% block content %}

<div class="container">
    <div class="row">
        <div class="col-sm-3">
            <div class="card card-block">
                <h1>{{request.user.watched_count}}</h1>
                <h6 class="text-muted">Movies watched</h6>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="card card-block">
                <h1>{{challenge.how_many_movies - request.user.watched_count}}</h1>
                <h6 class="text-muted">Movies left</h6>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="card card-block">
                <h1>{{challenge.days_left}}</h1>
                <h6 class="text-muted">Days left</h6>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="card card-block">
                <h1>~{{"{:0.1f}".format((challenge.how_many_movies - request.user.watched_count) / challenge.days_left)}}</h1>
                <h6 class="text-muted">Must watch per day</h6>
            </div>
        </div>
    </div>
</div>


<div class="container">

    <div class="btn-group" role="group">
        <button type="button" class="btn btn-primary">Watched</button>
        <button type="button" class="btn btn-primary">Un-watched</button>
    </div>

</div>


<div class="container">

    {% for viewing in viewing_list %}
    <div class="row">
        <div class="col-sm-2">
            <img src="{{ viewing.movie.cached_cover_url }}">
        </div>
        <div class="col-sm-10">
            <h4>
                <a href="{{ reverse('movie_detail', kwargs={'movieID': viewing.movie.imdb_id}) }}">{{viewing.movie}}{%if viewing.year%} ({{viewing.year}}){%endif%}</a>
                <span class="status status-{{viewing.status}}">{{viewing.get_status_display()}}</span>
            </h4>
            {%if viewing.status == 'unwatched' and viewing.scheduled_for %}<h5>Scheduled for {{viewing.scheduled_for.strftime("%b %d, %Y")}}</h5>{%endif%}
            {%if viewing.status == 'watched' and viewing.viewed_on %}<h5>Watched on {{viewing.viewed_on.strftime("%b %d, %Y")}}</h5>{%endif%}
            {%if viewing.movie.imdb_plot_outline%}<p>{{viewing.movie.imdb_plot_outline}}</p>{%endif%}
        </div>
    </div>
    {% endfor %}

</div>

{% endblock %}