{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>This is We Love Movies</h1>
</div>

<div class="container">
    <div class="row card-stats">
        <div class="col-md-3">
            <div class="card card-block">
                <h1>#{{challenge.day_number}}</h1>
                <h6 class="text-muted">Day<br>Number</h6>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card card-block">
                <h1>{{challenge.days_left}}</h1>
                <h6 class="text-muted">Days<br>Left</h6>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card card-block">
                <h1>{{cached_site.watched_count}}</h1>
                <h6 class="text-muted">Total<br>Watched</h6>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card card-block">
                <h1>{{"{:0.1f}".format(cached_site.velocity)}}</h1>
                <h6 class="text-muted">Watched<br>Per Day</h6>
            </div>
        </div>
    </div>
</div>


<hr>

<div class="container">
    <div class="row card-stats">

        <div class="col-sm-4">
            <div class="card">
                <div class="card-block">
                    <h1>{{cached_site.favorite_director[0]}}</h1>
                    <h6 class="text-muted">Favorite Director</h6>
                </div>
                <ul class="list-group list-group-flush">
                    {% for dir in cached_site.favorite_directors()[:3] %}
                    <li class="list-group-item">{{dir[0]}} <span class="pull-xs-right">{{dir[1]}}</span></li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="col-sm-4">
            <div class="card">
                <div class="card-block">
                    <h1>{{cached_site.favorite_genre[0]}}</h1>
                    <h6 class="text-muted">Favorite Genre</h6>
                </div>
                <ul class="list-group list-group-flush">
                    {% for g in cached_site.favorite_genres()[:3] %}
                    <li class="list-group-item">{{g[0]}} <span class="pull-xs-right">{{g[1]}}</span></li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="col-sm-4">
            <div class="card">
                <div class="card-block">
                    <h1>{{cached_site.favorite_decade[0]}}s</h1>
                    <h6 class="text-muted">Favorite Decade</h6>
                </div>
                <ul class="list-group list-group-flush">
                    {% for d in cached_site.favorite_decades()[:3] %}
                    <li class="list-group-item">{{d[0]}}s <span class="pull-xs-right">{{d[1]}}</span></li>
                    {% endfor %}
                </ul>
            </div>
        </div>

    </div>

</div>
<hr>

<div class="container">
    <div class="row">
        <div class="col-sm-2">
        </div>
        <div class="col-sm-8" id="graph-container">
        </div>
        <div class="col-sm-2">
        </div>
    </div>

</div>



{%endblock%}


{% block extrascripts %}
<script src="{{ static('js/d3.v3.min.js') }}"></script>
<script src="{{ static('js/cal-heatmap.min.js') }}"></script>
<script>
    var cal = new CalHeatMap();
    cal.init({
        data: '/v1/graph',
        itemSelector: '#graph-container',
        itemName: ['movie', 'movies'],
        start: new Date(2016,1,1),
        domain: "year",
        subDomain: "day",
        range: 1,
        legend: [1,2,3,4],
        displayLegend: false,
    });
</script>
{% endblock %}